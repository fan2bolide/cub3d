name: Run Curl on Push

on:
  push:
    # This workflow will be triggered on every push event

jobs:
  curl:
    runs-on: ubuntu-latest

    steps:
    - name: Check out code
      uses: actions/checkout@v2

    - name: Get Branch Name
      id: get_branch
      run: echo ::set-output name=branch::${GITHUB_REF#refs/heads/}
    
    - name: Run Curl
      run: |
        branch_name="${{ steps.get_branch.outputs.branch }}"
        curl -d "New push on $branch_name" http://ntfy.sh/cub3d
